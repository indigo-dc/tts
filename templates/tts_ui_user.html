Hello, {{ name }}, welcome!
<br>
<button id="ac_token" type="button" class="btn btn-default" data-toggle="modal"
    data-target="#AcTokenModal"> show access token </button> <br>

<div id="AcTokenModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="AcTokenModal">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
         <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Your Access Token</h4>
      </div>
      <div class="modal-body">
           <textarea class="form-control" readonly>{{ access_token }}</textarea>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<br>
{% if token %}
The token used to log into this session is:
<br>
<pre> {{ token }}</pre> 
{% endif %}
{% if service_list %}
<h2>Services</h2>
<table class="table table-striped">
    <tr>
        <th> Id  </th> 
        <th> Type  </th> 
        <th> Host  </th> 
        <th> Description </th> 
        <th> #Credentials </th> 
        <th> Action </th> 

    </tr>
    {% for service in service_list %}
    <tr>
        <form method="post" action="{{ ep_user }}">
            <input type="hidden" name="service_id" value="{{ service.id }}" >
            <td> {{ service.id }}  </td> 
            <td> {{ service.type }}  </td> 
            <td> {{ service.host }}  </td> 
            <td> {{ service.description }}  </td> 
            <td> {{ service.cred_count }} / {{ service.cred_limit }}</td> 
            <td>
                <button type="submit" class="btn btn-default"
            {% if not service.enabled or service.limit_reached %}
                disabled
            {% endif %}
                    >Request</button> 
                <input type="hidden" name="action" value="request" >
            </td>
        </form> 
    </tr>
    {% endfor %}
</table>
{% else %}
You are not able to request/revoke any credentials 
{% endif %}
{% if credential %}
<h2>Credential</h2>
This information will be gone once you perform any action, the
credential is also not stored on the server
<table class="table table-striped">
    {% for keyvalue in credential %}
    <tr>
        <td> {{ keyvalue.name }}  </td> 
        {% if keyvalue.type == "text" %}
        <td> <input type="text" value="{{ keyvalue.value }}" class="form-control" readonly></input> </td> 
        {% elif keyvalue.type == "textfile" %}
        <td> <textarea rows="{{ keyvalue.rows }}" class="form-control" cols="{{ keyvalue.cols }}" readonly>{{ keyvalue.value }}</textarea> </td> 
        {% else %}
        <td> <input type="text" value="{{ keyvalue.value }}" class="form-control" readonly></input> </td> 
        {% endif %}
    </tr>
    {% endfor %}
</table>
{% endif %}
{% if credential_log %}
<h3>Log</h3>
The log of executing the ssh-commands
<table class="table table-striped">
    <tr>
        <th> Command  </th> 
        <th> Exit Status  </th> 
        <th> Std Out  </th> 
        <th> Std Err  </th> 
    </tr>
    {% for log in credential_log %}
    <tr>
        <td> {{ log.cmd }}  </td> 
        <td> {{ log.exit_status }}  </td> 
        <td> {{ log.std_out }}  </td> 
        <td> {{ log.std_err }}  </td> 
    </tr>
    {% endfor %}
</table>

{% endif %}

{% if credential_list %}
<h2>Credentials</h2>
<table class="table table-striped">
    <tr>
        <th> Interface  </th> 
        <th> Creation Time  </th> 
        <th> Service Id  </th> 
        <th> Action  </th> 
    </tr>
    {% for credential in credential_list %}
    <tr>
        <form method="post" action="{{ ep_user }}">
            <input type="hidden" name="credential_id" value="{{credential.cred_id }}" >
            <td> {{ credential.interface }}  </td> 
            <td> {{ credential.ctime }}  </td> 
            <td> {{ credential.service_id }}  </td> 
            <td>
                <button type="submit" class="btn btn-default">Revoke</button> 
                <input type="hidden" name="action" value="revoke" >
            </td>
        </form> 
    </tr>
    {% endfor %}
</table>
{% else %}
{% endif %}
<br>
<form method="post" action="{{ ep_user }}">
    <input type="hidden" name="action" value="logout" >
    <button type="submit" class="btn btn-primary">Logout</button> 
</form> 
